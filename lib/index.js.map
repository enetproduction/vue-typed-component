{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,yBAA2B;AAC3B,2DAA6C;AA6C7C,gCAAgC;AAMhC,IAAa,cAAc;IAAgB,kCAAG;IAA9C;;IAEA,CAAC;IAAD,qBAAC;AAAD,CAAC,AAFD,CAA2C,GAAG,GAE7C;AAFY,cAAc;IAL1B,6BAAU,CAAsB;QAC7B,YAAY;YACR,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;KACJ,CAAC;GACW,cAAc,CAE1B;AAFY,wCAAc;AAI3B,2CAA2C;AAY3C,IAAa,gBAAgB;IAAwB,oCAAG;IAAxD;;IAGA,CAAC;IAAD,uBAAC;AAAD,CAAC,AAHD,CAAqD,GAAG,GAGvD;AAHY,gBAAgB;IAX5B,6BAAU,CAA6B;QACpC,YAAY;YACR,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,OAAO,GAAG;gBACX,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC3B,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;gBACvB,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC3B,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aAC5B,CAAC;QACN,CAAC;KACJ,CAAC;GACW,gBAAgB,CAG5B;AAHY,4CAAgB;AAK7B,yCAAyC;AACzC;IAAkE,0CAAqB;IAAvF;;IAGA,CAAC;IAAD,6BAAC;AAAD,CAAC,AAHD,CAAkE,cAAc,GAG/E;AAHqB,wDAAsB;AAK5C,iDAAiD;AACjD;IAA4E,4CAA+B;IAA3G;;IAGA,CAAC;IAAD,+BAAC;AAAD,CAAC,AAHD,CAA4E,gBAAgB,GAG3F;AAHqB,4DAAwB;AAajC,QAAA,SAAS,GAAuB,6BAAU,CAAC;AAGxD;;GAEG;AACH,6BACoB,IAAY,EACZ,KAA6B,EAC7B,MAAwC;IACxD,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;QACd,UAAU,EAAE,IAAI;QAChB,IAAI,MAAA;QACJ,KAAK,EAAE,KAAY;QACnB,MAAM,QAAA;KACT,CAAC,CAAC;AACP,CAAC;AAVD,kDAUC","sourcesContent":["import * as Vue from \"vue\";\r\nimport component_ from \"vue-class-component\";\r\nimport { PropType } from \"./types\";\r\n\r\n/*\r\n * copy from d.ts of vue-class-component\r\n */\r\nexport type VueClass<V> = (new () => V) & typeof Vue;\r\n\r\n\r\n/*\r\n * Mapped types\r\n */\r\nexport type PropsDefinition<Props> = {\r\n    [K in keyof Props]: Vue.PropOptions | PropType\r\n};\r\n\r\nexport type EventsObject<Events> = {\r\n    emit: <K extends keyof Events>(event: K, arg: Events[K]) => any;\r\n    on: <K extends keyof Events>(event: K, callback: (arg: Events[K]) => any) => any;\r\n    once: <K extends keyof Events>(event: K, callback: (arg: Events[K]) => any) => any;\r\n    off: <K extends keyof Events>(event: K, callback?: (arg: Events[K]) => any) => any;\r\n};\r\n\r\n\r\n/*\r\n * Typesafe wrappers of types exposed from vue\r\n */\r\nexport type ComponentOptions<V extends Vue, Props> = Vue.ComponentOptions<V> & {\r\n    props: PropsDefinition<Props>\r\n};\r\n\r\nexport interface RenderContext<Props> extends Vue.RenderContext {\r\n  props: Props;\r\n}\r\n\r\nexport interface RenderFuncitonalComponent<Props> {\r\n    (this: never, h: Vue.CreateElement, context: RenderContext<Props>): Vue.VNode;\r\n}\r\n\r\n\r\n/*\r\n * Base classes of typesafe Component\r\n */\r\nexport type TypedComponentBase<Props> = { $props: Props } & Vue;\r\n\r\n// for component which has props\r\n@component_<TypedComponent<any>>({\r\n    beforeCreate() {\r\n        this.$props = this;\r\n    }\r\n})\r\nexport class TypedComponent<Props> extends Vue {\r\n    $props: Props;\r\n}\r\n\r\n// for component which has props and events\r\n@component_<EvTypedComponent<any, any>>({\r\n    beforeCreate() {\r\n        this.$props = this;\r\n        this.$events = {\r\n            emit: this.$emit.bind(this),\r\n            on: this.$on.bind(this),\r\n            once: this.$once.bind(this),\r\n            off: this.$off.bind(this)\r\n        };\r\n    }\r\n})\r\nexport class EvTypedComponent<Props, Events> extends Vue {\r\n    $props: Props;\r\n    $events: EventsObject<Events>;\r\n}\r\n\r\n// for component which has props and data\r\nexport abstract class StatefulTypedComponent<Props, Data> extends TypedComponent<Props> {\r\n    $data: Data;\r\n    abstract data(): Data;\r\n}\r\n\r\n// for component which has props, events and data\r\nexport abstract class StatefulEvTypedComponent<Props, Events, Data> extends EvTypedComponent<Props, Events> {\r\n    $data: Data;\r\n    abstract data(): Data;\r\n}\r\n\r\n\r\n/*\r\n * Typesafe definition of decorator\r\n */\r\nexport interface ComponentDecorator {\r\n    <P, V extends TypedComponentBase<P>>(options: ComponentOptions<V, P>): (target: VueClass<V>) => VueClass<V>;\r\n    <P>(options: ComponentOptions<TypedComponentBase<P>, P>): <V extends TypedComponentBase<P>>(target: VueClass<V>) => VueClass<V>;\r\n}\r\nexport const component: ComponentDecorator = component_;\r\n\r\n\r\n/*\r\n * Typesafe helper to define functional component\r\n */\r\nexport function functionalComponent<Props>(\r\n                    name: string,\r\n                    props: PropsDefinition<Props>,\r\n                    render: RenderFuncitonalComponent<Props>): VueClass<Vue> {\r\n    return Vue.extend({\r\n        functional: true,\r\n        name,\r\n        props: props as any,\r\n        render\r\n    });\r\n}\r\n\r\n"]}